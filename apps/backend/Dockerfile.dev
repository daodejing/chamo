FROM node:20-alpine

# Install pnpm and tzdata for timezone support
RUN apk add --no-cache tzdata && npm install -g pnpm

# Set timezone to Asia/Tokyo
ENV TZ=Asia/Tokyo
RUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime && echo $TZ > /etc/timezone

# Set working directory
WORKDIR /app

# Install dependencies will happen via volume mount to use host's node_modules
# This way we leverage the host's already installed packages

# Expose GraphQL port
EXPOSE 4000

# Default command - will be overridden by docker-compose
CMD ["pnpm", "start:dev"]
