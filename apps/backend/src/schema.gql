# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

input AcceptInviteInput {
  inviteCode: String!
}

type AcceptInviteResponse {
  encryptedFamilyKey: String!
  familyId: ID!
  familyName: String!
  inviterPublicKey: String!
  message: String!
  nonce: String!
  success: Boolean!
}

type AdminStatusResponse {
  blockingFamilies: [BlockingFamilyType!]!
  canDelete: Boolean!
}

type AuthResponse {
  accessToken: String!
  family: FamilyType
  pendingInviteCode: String
  refreshToken: String!
  user: UserType!
}

type BlockingFamilyType {
  familyId: ID!
  familyName: String!
  memberCount: Float!
  requiresAction: Boolean!
}

input CacheMessageTranslationInput {
  encryptedTranslation: String!
  messageId: String!
  targetLanguage: String!
}

type Channel {
  createdAt: DateTime!
  createdById: String!
  description: String
  familyId: String!
  icon: String
  id: ID!
  isDefault: Boolean!
  name: String!
}

type CleanupResult {
  deletedFamilies: Float!
  deletedUsers: Float!
  message: String!
  success: Boolean!
}

input CreateEncryptedInviteInput {
  encryptedFamilyKey: String!
  expiresAt: String!
  familyId: String!
  inviteCode: String!
  inviteeEmail: String!
  nonce: String!
}

input CreateFamilyInput {
  inviteCode: String!
  name: String!
}

type CreateFamilyResponse {
  family: FamilyType!
  inviteCode: String!
}

input CreateInviteInput {
  inviteeEmail: String!

  """ISO 639-1 language code for invite email (defaults to en)"""
  inviteeLanguage: String
}

type CreateInviteResponse {
  invite: InviteType!
  inviteCode: String!
  message: String!
}

input CreatePendingInviteInput {
  familyId: String!
  inviteeEmail: String!

  """ISO 639-1 language code for the invite email (e.g., "en", "ja")"""
  inviteeLanguage: String
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

input DeleteFamilyInput {
  familyId: ID!
}

input DeleteMessageInput {
  messageId: ID!
}

type DeleteMessageResponse {
  messageId: ID!
  success: Boolean!
}

type DeletedMessageType {
  messageId: ID!
}

input EditMessageInput {
  encryptedContent: String!
  messageId: ID!
}

type EmailVerificationResponse {
  message: String!
  requiresEmailVerification: Boolean!
  userId: ID!
}

type FamilyAdminFixturePayload {
  admin: AuthResponse!
  family: FamilyType!
  inviteCode: String!
}

type FamilyMemberType {
  avatar: String
  email: String!
  id: ID!
  joinedAt: DateTime!
  name: String!
  role: String!
}

type FamilyMembershipType {
  family: FamilyType!
  familyId: String!
  id: ID!
  joinedAt: DateTime!
  role: String!
}

type FamilyType {
  avatar: String
  id: ID!
  inviteCode: String!
  maxMembers: Float!
  name: String!
}

type GenericResponse {
  message: String!
  success: Boolean!
}

input GetMessagesInput {
  channelId: ID!
  cursor: ID
  limit: Int = 50
}

type InviteResponse {
  expiresAt: DateTime!
  inviteCode: String!
  inviteeEmail: String!

  """ISO 639-1 language code for invite email"""
  inviteeLanguage: String!
}

"""The status of a family invite"""
enum InviteStatus {
  ACCEPTED
  EXPIRED
  PENDING
  PENDING_REGISTRATION
  REVOKED
}

type InviteType {
  acceptedAt: DateTime
  createdAt: DateTime!
  encryptedFamilyKey: String
  expiresAt: DateTime!
  familyId: ID!
  id: ID!
  inviteCode: String!
  inviteeEmail: String!
  inviterId: ID!
  nonce: String
  status: InviteStatus!
  updatedAt: DateTime!
}

input JoinFamilyExistingInput {
  inviteCode: String!
  makeActive: Boolean! = true
}

input JoinFamilyInput {
  email: String!
  inviteCode: String!
  name: String!
  password: String!
  publicKey: String!
}

input LoginInput {
  email: String!
  password: String!
}

type MessageTranslationType {
  createdAt: DateTime!
  encryptedTranslation: String!
  id: ID!
  messageId: ID!
  targetLanguage: String!
}

type MessageUserType {
  avatar: String
  id: ID!
  name: String!
}

type MessageWithUserType {
  channelId: ID!
  createdAt: DateTime!
  editedAt: DateTime
  encryptedContent: String!
  id: ID!
  isEdited: Boolean!
  timestamp: DateTime!
  user: MessageUserType!
  userId: ID!
}

type MessagingFixturePayload {
  admin: AuthResponse!
  channel: Channel!
  family: FamilyType!
  inviteCode: String!
  member: AuthResponse!
}

type Mutation {
  acceptInvite(input: AcceptInviteInput!): AcceptInviteResponse!
  cacheMessageTranslation(input: CacheMessageTranslationInput!): MessageTranslationType!
  createEncryptedInvite(input: CreateEncryptedInviteInput!): CreateInviteResponse!
  createFamily(input: CreateFamilyInput!): CreateFamilyResponse!
  createInvite(input: CreateInviteInput!): InviteResponse!
  createPendingInvite(input: CreatePendingInviteInput!): CreateInviteResponse!
  deleteFamily(input: DeleteFamilyInput!): GenericResponse!
  deleteMessage(input: DeleteMessageInput!): DeleteMessageResponse!
  deregisterSelf: GenericResponse!
  editMessage(input: EditMessageInput!): MessageWithUserType!
  joinFamily(input: JoinFamilyInput!): EmailVerificationResponse!
  joinFamilyAsMember(input: JoinFamilyExistingInput!): FamilyType!
  login(input: LoginInput!): AuthResponse!
  logout: Boolean!
  promoteToAdmin(input: PromoteToAdminInput!): GenericResponse!
  register(input: RegisterInput!): EmailVerificationResponse!
  removeFamilyMember(input: RemoveFamilyMemberInput!): GenericResponse!
  reportInviteDecryptFailure(input: ReportInviteDecryptFailureInput!): GenericResponse!
  resendVerificationEmail(email: String!): GenericResponse!
  sendMessage(input: SendMessageInput!): MessageWithUserType!

  """Send a test invite notification email (for development/testing only)"""
  sendTestInviteEmail(email: String!, familyName: String! = "Test Family", inviteCode: String! = "TEST123"): Boolean!

  """Send a test verification email (for development/testing only)"""
  sendTestVerificationEmail(email: String!, token: String! = "test-token-123"): Boolean!

  """Send a test welcome email (for development/testing only)"""
  sendTestWelcomeEmail(email: String!, userName: String! = "Test User"): Boolean!
  switchActiveFamily(input: SwitchFamilyInput!): UserType!

  """Clean up test data by user IDs, family IDs, or email patterns"""
  testCleanup(input: TestCleanupInput!): CleanupResult!

  """Create a family admin fixture for invite tests"""
  testCreateFamilyAdminFixture(input: TestCreateFamilyAdminFixtureInput!): FamilyAdminFixturePayload!
  testCreateMessagingFixture(input: TestCreateMessagingFixtureInput!): MessagingFixturePayload!
  updateUserPreferences(input: UpdateUserPreferencesInput!): UserType!
  verifyEmail(token: String!): AuthResponse!
}

input PromoteToAdminInput {
  familyId: ID!
  userId: ID!
}

type Query {
  getAdminStatus: AdminStatusResponse!
  getChannel(id: String!): Channel
  getChannels: [Channel!]!
  getFamilyInvites(familyId: String!): [InviteType!]!
  getFamilyMembers(familyId: String!): [FamilyMemberType!]!
  getMessages(input: GetMessagesInput!): [MessageWithUserType!]!
  getPendingInvites(familyId: String!): [InviteType!]!
  getUserPublicKey(email: String!): String
  me: UserType!
  messageTranslation(messageId: String!, targetLanguage: String!): MessageTranslationType
}

input RegisterInput {
  email: String!
  name: String!
  password: String!
  pendingInviteCode: String
  publicKey: String!
}

input RemoveFamilyMemberInput {
  familyId: ID!
  userId: ID!
}

input ReportInviteDecryptFailureInput {
  inviteCode: String!
  reason: String!
}

input SendMessageInput {
  channelId: ID!
  encryptedContent: String!
}

type Subscription {
  messageAdded(channelId: String!): MessageWithUserType!
  messageDeleted(channelId: String!): DeletedMessageType!
  messageEdited(channelId: String!): MessageWithUserType!
}

input SwitchFamilyInput {
  familyId: ID!
}

input TestCleanupInput {
  """Email patterns to match (e.g., test-*@example.com)"""
  emailPatterns: [String!]
  familyIds: [String!]
  userIds: [String!]
}

input TestCreateFamilyAdminFixtureInput {
  admin: TestUserSetupInput!
  familyName: String!
}

input TestCreateMessagingFixtureInput {
  admin: TestUserSetupInput!
  channelName: String
  familyName: String!
  member: TestUserSetupInput!
}

input TestUserSetupInput {
  email: String!
  name: String!
  password: String!
  publicKey: String
}

input UpdateUserPreferencesInput {
  preferredLanguage: String
}

type UserPreferencesType {
  preferredLanguage: String
}

type UserType {
  activeFamily: FamilyType
  activeFamilyId: ID
  avatar: String
  email: String!
  emailVerified: Boolean!
  family: FamilyType
  id: ID!
  memberships: [FamilyMembershipType!]!
  name: String!
  preferences: UserPreferencesType
  publicKey: String!
  role: String!
}